docker run -it --rm  --entrypoint bash jrottenberg/ffmpeg:5.1.4-ubuntu2204

ffmpeg -bsfs | grep annex
# h264_mp4toannexb
# hevc_mp4toannexb


live_flv : In case of live network streams, if you force format, you may use live_flv option instead of flv to survive timestamp discontinuities.

-f live_flv

ff_live_flv_demuxer

ff_flv_demuxer

ffmpeg -h demuxer=live_flv
ffmpeg -h bsf=h264_mp4toannexb

example:

https://github.com/FFmpeg/FFmpeg/blob/9c6c4f3d476d7a8d423ec3b954254c6a67ebc792/libavformat/mux.c#L1351
https://github.com/search?q=repo%3AFFmpeg%2FFFmpeg%20ff_stream_add_bitstream_filter&type=code

Good explanaation
https://stackoverflow.com/questions/24884827/possible-locations-for-sequence-picture-parameter-sets-for-h-264-stream/24890903#24890903
Filter impl https://github.com/FFmpeg/FFmpeg/blob/9c6c4f3d476d7a8d423ec3b954254c6a67ebc792/libavcodec/bsf/h264_mp4toannexb.c#L276
